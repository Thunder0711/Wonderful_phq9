<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <style>
        :root { --ac-mint: #A8D5BA; --ac-brown: #5B4636; }
        body { font-family: sans-serif; display: flex; flex-direction: column; align-items: center; padding: 20px; color: var(--ac-brown); background: #fff; }
        h2 { font-size: 1.5rem; margin-bottom: 10px; }
        .hint { color: #666; margin-bottom: 30px; text-align: center; }
        
        /* æ»‘å—å®¹å™¨ */
        .slider-container { width: 90%; position: relative; margin: 40px 0; }
        .labels { display: flex; justify-content: space-between; margin-bottom: 15px; color: #888; font-size: 0.9rem; }
        
        /* æ¸å˜è¿›åº¦æ¡èƒŒæ™¯ */
        input[type=range] { -webkit-appearance: none; width: 100%; height: 8px; border-radius: 4px; 
            background: linear-gradient(to right, #4CAF50, #FFC107, #F44336); outline: none; }
        input[type=range]::-webkit-slider-thumb { -webkit-appearance: none; width: 24px; height: 24px; 
            background: #fff; border: 3px solid #88A9F5; border-radius: 50%; cursor: pointer; box-shadow: 0 2px 6px rgba(0,0,0,0.2); }

        .value-display { font-size: 3rem; font-weight: bold; color: #5C7CFA; margin: 20px 0; }
        .feedback { display: flex; align-items: center; gap: 10px; font-size: 1.2rem; font-weight: bold; }
        .submit-btn { margin-top: 40px; width: 100%; max-width: 300px; padding: 15px; background: #5C7CFA; 
            color: white; border: none; border-radius: 12px; font-size: 1.1rem; cursor: pointer; }
    </style>
</head>
<body>
    <h2>æƒ…ç»ªä½è½æ°´å¹³è¯„ä¼°</h2>
    <div class="hint">è¯·æ‹–åŠ¨ä¸‹é¢çš„æ»‘å—æ¥è¯„ä¼°æ‚¨å½“å‰çš„æƒ…ç»ªä½è½æ°´å¹³<br>0è¡¨ç¤ºæƒ…ç»ªéå¸¸å¥½ï¼Œ10è¡¨ç¤ºæƒ…ç»ªéå¸¸ä½è½</div>

    <div class="slider-container">
        <div class="labels">
            <span>0 (ç§¯æ)</span>
            <span>5 (ä¸­ç­‰)</span>
            <span>10 (ä½è½)</span>
        </div>
        <input type="range" id="moodSlider" min="0" max="10" value="5">
    </div>

    <div class="value-display" id="valText">5</div>
    <div class="feedback">
        <span id="emoji">ğŸ˜</span>
        <span id="status">ä¸­ç­‰æƒ…ç»ª</span>
    </div>

    <button class="submit-btn" onclick="submit()">æäº¤è¯„ä¼°</button>

    <script>
        const slider = document.getElementById('moodSlider');
        const valText = document.getElementById('valText');
        const emoji = document.getElementById('emoji');
        const status = document.getElementById('status');

        const config = {
            0: { e: 'ğŸ˜Š', s: 'éå¸¸ç§¯æ' }, 1: { e: 'ğŸ™‚', s: 'æ¯”è¾ƒç§¯æ' }, 2: { e: 'ğŸ™‚', s: 'æ¯”è¾ƒç§¯æ' },
            3: { e: 'ğŸ˜€', s: 'æƒ…ç»ªå°šå¯' }, 4: { e: 'ğŸ˜', s: 'æƒ…ç»ªå¹³ç¨³' }, 5: { e: 'ğŸ˜', s: 'ä¸­ç­‰æƒ…ç»ª' },
            6: { e: 'ğŸ˜Ÿ', s: 'è½»å¾®ä½è½' }, 7: { e: 'ğŸ˜Ÿ', s: 'è½»å¾®ä½è½' }, 8: { e: 'ğŸ˜”', s: 'æ¯”è¾ƒä½è½' },
            9: { e: 'ğŸ˜«', s: 'éå¸¸ä½è½' }, 10: { e: 'ğŸ˜­', s: 'ä¸¥é‡ä½è½' }
        };

        slider.oninput = function() {
            const val = this.value;
            valText.innerText = val;
            emoji.innerText = config[val].e;
            status.innerText = config[val].s;
        };

        function submit() {
            const val = parseInt(slider.value);
            // è®¡åˆ†æ˜ å°„ï¼š0-10 æ˜ å°„åˆ° PHQ-9 çš„ 0-3 åˆ†
            let phqScore = 0;
            if (val >= 3 && val <= 5) phqScore = 1;
            else if (val >= 6 && val <= 8) phqScore = 2;
            else if (val >= 9) phqScore = 3;

            window.parent.postMessage({
                type: 'experiment_result',
                eid: 'depression',
                score: phqScore,
                raw_value: val
            }, '*');
        }
    </script>
</body>
</html>