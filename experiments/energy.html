<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        :root {
            --ac-mint: #A8D5BA; --ac-cream: #FDFaf5; --ac-brown: #5B4636;
            --ac-sand: #E6D5B8; --accent-blue: #78A2CC;
        }
        body {
            font-family: -apple-system, sans-serif; background-color: #fff;
            display: flex; flex-direction: column; align-items: center;
            padding: 20px; margin: 0; color: var(--ac-brown);
        }

        /* æ ‡é¢˜æ’ç‰ˆå‚è€ƒ */
        .header { text-align: center; margin-bottom: 30px; }
        .header h2 { margin: 0; font-size: 1.5rem; color: var(--ac-brown); }
        .header p { margin: 10px 0; font-size: 0.9rem; color: #999; line-height: 1.4; }

        /* æ»‘å—å®¹å™¨è®¾è®¡ */
        .slider-container { width: 90%; position: relative; margin: 40px 0; }
        .labels { display: flex; justify-content: space-between; margin-bottom: 15px; color: #888; font-size: 0.9rem; }
        
        /* æ¸å˜è¿›åº¦æ¡ï¼šä»ç»¿è‰²(å……æ»¡æ´»åŠ›)åˆ°çº¢è‰²(ç­‹ç–²åŠ›å°½) */
        input[type=range] {
            -webkit-appearance: none; width: 100%; height: 8px; border-radius: 4px;
            background: linear-gradient(to right, #4CAF50, #FFC107, #F44336);
            outline: none;
        }
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none; width: 28px; height: 28px;
            background: #fff; border: 3px solid #88A9F5;
            border-radius: 50%; cursor: pointer;
            box-shadow: 0 2px 8px rgba(0,0,0,0.15);
        }

        /* åé¦ˆæ•°å€¼ä¸çŠ¶æ€ */
        .value-display { font-size: 3.5rem; font-weight: bold; color: #5C7CFA; margin: 15px 0; }
        .feedback-box { display: flex; align-items: center; gap: 12px; font-size: 1.25rem; font-weight: bold; }
        
        .submit-btn {
            margin-top: 40px; width: 100%; max-width: 350px; padding: 16px;
            background: #5C7CFA; color: white; border: none; border-radius: 15px;
            font-size: 1.1rem; font-weight: bold; cursor: pointer;
            transition: background 0.2s;
        }
        .submit-btn:active { background: #4263eb; }
    </style>
</head>
<body>

    <div class="header">
        <h2>ç²¾åŠ›ä¸ç–²åŠ³æ°´å¹³è¯„ä¼°</h2>
        <p>è¯·æ‹–åŠ¨æ»‘å—è¯„ä¼°æ‚¨å½“å‰çš„ç²¾åŠ›çŠ¶æ€<br>0è¡¨ç¤ºå……æ»¡æ´»åŠ›ï¼Œ10è¡¨ç¤ºç­‹ç–²åŠ›å°½</p>
    </div>

    <div class="slider-container">
        <div class="labels">
            <span>0 (å……æ»¡æ´»åŠ›)</span>
            <span>5 (æœ‰äº›ç–²å€¦)</span>
            <span>10 (ç­‹ç–²åŠ›å°½)</span>
        </div>
        <input type="range" id="energySlider" min="0" max="10" value="5">
    </div>

    <div class="value-display" id="valText">5</div>
    
    <div class="feedback-box">
        <span id="emoji" style="font-size: 1.8rem;">ğŸ˜</span>
        <span id="status">æœ‰äº›ç–²å€¦</span>
    </div>

    <button class="submit-btn" onclick="submit()">æäº¤è¯„ä¼°</button>

    <script>
        const slider = document.getElementById('energySlider');
        const valText = document.getElementById('valText');
        const emoji = document.getElementById('emoji');
        const status = document.getElementById('status');

        // çŠ¶æ€æ˜ å°„é…ç½®
        const config = {
            0: { e: 'âš¡', s: 'å……æ»¡æ´»åŠ›' }, 1: { e: 'ğŸ˜Š', s: 'ç²¾ç¥é¥±æ»¡' }, 2: { e: 'ğŸ™‚', s: 'çŠ¶æ€ä¸é”™' },
            3: { e: 'ğŸ˜€', s: 'ç²¾åŠ›å°šå¯' }, 4: { e: 'ğŸ˜Œ', s: 'ç¨æ„Ÿç–²åŠ³' }, 5: { e: 'ğŸ˜', s: 'æœ‰äº›ç–²å€¦' },
            6: { e: 'ğŸ¥±', s: 'æ¯”è¾ƒç–²æƒ«' }, 7: { e: 'ğŸ˜«', s: 'éå¸¸åŠ³ç´¯' }, 8: { e: 'ğŸ˜“', s: 'ç²¾åŠ›ä¸¥é‡ä¸è¶³' },
            9: { e: 'ğŸ˜°', s: 'æåº¦è™šè„±' }, 10: { e: 'ğŸ’€', s: 'ç­‹ç–²åŠ›å°½' }
        };

        slider.oninput = function() {
            const val = this.value;
            valText.innerText = val;
            emoji.innerText = config[val].e;
            status.innerText = config[val].s;
        };

        function submit() {
            const val = parseInt(slider.value);
            
            // ç²¾åŠ›è¯„åˆ†æ˜ å°„ï¼š0-10 æ˜ å°„åˆ° PHQ-9 (D4) çš„ 0-3 åˆ†
            // 0-2: 0åˆ† (å®Œå…¨ä¸è§‰å¾—ç´¯)
            // 3-5: 1åˆ† (æœ‰å‡ å¤©è§‰å¾—ç´¯)
            // 6-8: 2åˆ† (ä¸€åŠä»¥ä¸Šæ—¶é—´è§‰å¾—ç´¯)
            // 9-10: 3åˆ† (å‡ ä¹æ¯å¤©éƒ½è§‰å¾—ç´¯)
            let phqScore = 0;
            if (val >= 3 && val <= 5) phqScore = 1;
            else if (val >= 6 && val <= 8) phqScore = 2;
            else if (val >= 9) phqScore = 3;

            // å›ä¼ ç»“æœç»™çˆ¶ç½‘é¡µ
            window.parent.postMessage({
                type: 'experiment_result',
                eid: 'energy',
                score: phqScore,
                raw_value: val
            }, '*');
        }
    </script>
</body>
</html>